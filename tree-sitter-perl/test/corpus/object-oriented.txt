==========================================
SUPER method calls
==========================================

sub method {
    my $self = shift;
    $self->SUPER::method(@_);
    $self->SUPER::new();
    $self->Some::Parent::SUPER::method();
}

---

(source_file
  (subroutine_declaration_statement
    (identifier)
    (block
      (assignment_expression
        (variable_declaration
          (scalar_variable))
        (assignment_operator)
        (func0op_call_expression
          (identifier)))
      (method_call_expression
        (scalar_variable)
        (arrow_operator)
        (method_name
          (qualified_name))
        (arguments
          (special_array_variable)))
      (method_call_expression
        (scalar_variable)
        (arrow_operator)
        (method_name
          (qualified_name))
        (arguments))
      (method_call_expression
        (scalar_variable)
        (arrow_operator)
        (method_name
          (qualified_name))
        (arguments)))))

==========================================
UNIVERSAL methods
==========================================

$obj->isa('Some::Class');
$obj->isa($class);
$obj->can('method_name');
$obj->can($method);
$obj->DOES('Some::Role');
$obj->VERSION(1.23);
UNIVERSAL::isa($ref, 'ARRAY');
UNIVERSAL::can($obj, 'method');

---

(source_file
  (method_call_expression
    (scalar_variable)
    (arrow_operator)
    (identifier)
    (arguments
      (string_literal
        (string_content))))
  (method_call_expression
    (scalar_variable)
    (arrow_operator)
    (identifier)
    (arguments
      (scalar_variable)))
  (method_call_expression
    (scalar_variable)
    (arrow_operator)
    (identifier)
    (arguments
      (string_literal
        (string_content))))
  (method_call_expression
    (scalar_variable)
    (arrow_operator)
    (identifier)
    (arguments
      (scalar_variable)))
  (method_call_expression
    (scalar_variable)
    (arrow_operator)
    (identifier)
    (arguments
      (string_literal
        (string_content))))
  (method_call_expression
    (scalar_variable)
    (arrow_operator)
    (identifier)
    (arguments
      (float)))
  (function_call_expression
    (qualified_name)
    (arguments
      (scalar_variable)
      (comma)
      (string_literal
        (string_content))))
  (function_call_expression
    (qualified_name)
    (arguments
      (scalar_variable)
      (comma)
      (string_literal
        (string_content)))))

==========================================
DESTROY and AUTOLOAD
==========================================

sub DESTROY {
    my $self = shift;
    print "Destroying $self\n";
    $self->cleanup();
}

sub AUTOLOAD {
    our $AUTOLOAD;
    my $method = $AUTOLOAD;
    $method =~ s/.*:://;
    print "Calling undefined method: $method\n";
}

---

(source_file
  (subroutine_declaration_statement
    (identifier)
    (block
      (assignment_expression
        (variable_declaration
          (scalar_variable))
        (assignment_operator)
        (func0op_call_expression
          (identifier)))
      (func1op_call_expression
        (identifier)
        (string_literal
          (string_content)
          (interpolation
            (scalar_variable))))
      (method_call_expression
        (scalar_variable)
        (arrow_operator)
        (identifier)
        (arguments))))
  (subroutine_declaration_statement
    (identifier)
    (block
      (variable_declaration
        (variable_declaration_type)
        (scalar_variable))
      (assignment_expression
        (variable_declaration
          (scalar_variable))
        (assignment_operator)
        (scalar_variable))
      (binary_expression
        (scalar_variable)
        (binary_operator)
        (regex_substitution_expression
          (regex
            (regex_pattern)
            (string_content))))
      (func1op_call_expression
        (identifier)
        (string_literal
          (string_content)
          (interpolation
            (scalar_variable)))))))

==========================================
Tied variables
==========================================

tie %hash, 'Tie::Hash::Class', @args;
tie @array, 'Tie::Array::Class';
tie $scalar, 'Tie::Scalar::Class';
tie *HANDLE, 'Tie::Handle::Class';

tied(%hash)->method();
untie %hash;

---

(source_file
  (function_call_expression
    (identifier)
    (arguments
      (hash_variable)
      (comma)
      (string_literal
        (string_content))
      (comma)
      (array_variable)))
  (function_call_expression
    (identifier)
    (arguments
      (array_variable)
      (comma)
      (string_literal
        (string_content))))
  (function_call_expression
    (identifier)
    (arguments
      (scalar_variable)
      (comma)
      (string_literal
        (string_content))))
  (function_call_expression
    (identifier)
    (arguments
      (typeglob_variable)
      (comma)
      (string_literal
        (string_content))))
  (method_call_expression
    (function_call_expression
      (identifier)
      (arguments
        (hash_variable)))
    (arrow_operator)
    (identifier)
    (arguments))
  (func1op_call_expression
    (identifier)
    (hash_variable)))

==========================================
Operator overloading
==========================================

use overload
    '+' => \&add,
    '-' => \&subtract,
    '*' => \&multiply,
    '""' => \&stringify,
    '0+' => \&numify,
    'bool' => \&boolify,
    '<=>' => \&compare,
    'cmp' => \&string_compare,
    '=' => \&copy,
    fallback => 1;

use overload
    '+=' => sub { $_[0]->{value} += $_[1]; $_[0] },
    '++' => sub { $_[0]->{value}++; $_[0] },
    '--' => sub { $_[0]->{value}--; $_[0] };

---

(source_file
  (use_statement
    (identifier)
    (arguments
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (reference_expression
          (reference_operator)
          (function_variable)))
      (comma)
      (hash_pair
        (bareword)
        (fat_arrow_operator)
        (integer))))
  (use_statement
    (identifier)
    (arguments
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (anonymous_sub_expression
          (block
            (augmented_assignment_expression
              (hash_access_expression
                (array_access_variable
                  (special_array_variable)
                  (array_access_index
                    (integer)))
                (hash_access_index
                  (bareword)))
              (assignment_operator)
              (array_access_variable
                (special_array_variable)
                (array_access_index
                  (integer))))
            (array_access_variable
              (special_array_variable)
              (array_access_index
                (integer))))))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (anonymous_sub_expression
          (block
            (postfix_expression
              (hash_access_expression
                (array_access_variable
                  (special_array_variable)
                  (array_access_index
                    (integer)))
                (hash_access_index
                  (bareword)))
              (postfix_operator))
            (array_access_variable
              (special_array_variable)
              (array_access_index
                (integer))))))
      (comma)
      (hash_pair
        (string_literal
          (string_content))
        (fat_arrow_operator)
        (anonymous_sub_expression
          (block
            (postfix_expression
              (hash_access_expression
                (array_access_variable
                  (special_array_variable)
                  (array_access_index
                    (integer)))
                (hash_access_index
                  (bareword)))
              (postfix_operator))
            (array_access_variable
              (special_array_variable)
              (array_access_index
                (integer)))))))))

==========================================
Blessed references
==========================================

$obj = bless {}, 'MyClass';
$obj = bless \$scalar, 'ScalarClass';
$obj = bless [], 'ArrayClass';
$obj = bless \&sub, 'CodeClass';

$class = ref($obj);
$class = ref($obj) || $obj;
$is_blessed = blessed($obj);

---

(source_file
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (function_call_expression
      (identifier)
      (arguments
        (anonymous_hash_expression)
        (comma)
        (string_literal
          (string_content)))))
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (function_call_expression
      (identifier)
      (arguments
        (reference_expression
          (reference_operator)
          (scalar_variable))
        (comma)
        (string_literal
          (string_content)))))
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (function_call_expression
      (identifier)
      (arguments
        (anonymous_array_expression)
        (comma)
        (string_literal
          (string_content)))))
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (function_call_expression
      (identifier)
      (arguments
        (reference_expression
          (reference_operator)
          (function_variable))
        (comma)
        (string_literal
          (string_content)))))
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (function_call_expression
      (identifier)
      (arguments
        (scalar_variable))))
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (binary_expression
      (function_call_expression
        (identifier)
        (arguments
          (scalar_variable)))
      (binary_operator)
      (scalar_variable)))
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (function_call_expression
      (identifier)
      (arguments
        (scalar_variable)))))

==========================================
Method chaining
==========================================

$result = $obj
    ->method1()
    ->method2($arg)
    ->method3(@args)
    ->method4({ key => 'value' })
    ->SUPER::parent_method()
    ->$method_name(@_);

---

(source_file
  (assignment_expression
    (scalar_variable)
    (assignment_operator)
    (method_call_expression
      (method_call_expression
        (method_call_expression
          (method_call_expression
            (method_call_expression
              (method_call_expression
                (scalar_variable)
                (arrow_operator)
                (identifier)
                (arguments))
              (arrow_operator)
              (identifier)
              (arguments
                (scalar_variable)))
            (arrow_operator)
            (identifier)
            (arguments
              (array_variable)))
          (arrow_operator)
          (identifier)
          (arguments
            (anonymous_hash_expression
              (hash_pair
                (bareword)
                (fat_arrow_operator)
                (string_literal
                  (string_content))))))
        (arrow_operator)
        (method_name
          (qualified_name))
        (arguments))
      (arrow_operator)
      (scalar_variable)
      (arguments
        (special_array_variable)))))

==========================================
Class inheritance
==========================================

package MyClass;
use base qw(Parent1 Parent2);
use parent -norequire => qw(Local::Parent);

our @ISA = qw(BaseClass);
push @ISA, 'AnotherBase';

sub new {
    my $class = shift;
    my $self = $class->SUPER::new(@_);
    bless $self, $class;
}

---

(source_file
  (package_statement
    (identifier))
  (use_statement
    (identifier)
    (arguments
      (qw_string_list
        (qw_element)
        (qw_element))))
  (use_statement
    (identifier)
    (arguments
      (unary_expression
        (unary_operator)
        (bareword))
      (fat_arrow_operator)
      (qw_string_list
        (qw_element))))
  (assignment_expression
    (variable_declaration
      (variable_declaration_type)
      (array_variable))
    (assignment_operator)
    (qw_string_list
      (qw_element)))
  (func1op_call_expression
    (identifier)
    (array_variable)
    (comma)
    (string_literal
      (string_content)))
  (subroutine_declaration_statement
    (identifier)
    (block
      (assignment_expression
        (variable_declaration
          (scalar_variable))
        (assignment_operator)
        (func0op_call_expression
          (identifier)))
      (assignment_expression
        (variable_declaration
          (scalar_variable))
        (assignment_operator)
        (method_call_expression
          (scalar_variable)
          (arrow_operator)
          (method_name
            (qualified_name))
          (arguments
            (special_array_variable))))
      (function_call_expression
        (identifier)
        (arguments
          (scalar_variable)
          (comma)
          (scalar_variable))))))