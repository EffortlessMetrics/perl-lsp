# CI Baseline – 2025-11-13

**Purpose**: Establish known-good master state after landing CI/lockfile hardening (PR #214), flaky timeout fix (PR #215), and document highlighting fix (PR #216).

---

## Baseline Information

- **Date**: 2025-11-13
- **Branch**: `master`
- **Commit**: `2aff88e8` - feat(#191): complete document highlighting for new AST structure
- **Toolchain**: rustc 1.90.0 (1159e78c4 2025-09-14) / cargo 1.90.0 (840b83a10 2025-07-30)
- **OS**: Linux (WSL2)

---

## Validation Results

### Fast Merge Gate (`just ci-gate`)
✅ **PASSED**
- Format check: ✅ passed
- Clippy (library): ✅ passed
- Core tests (library): ✅ 274 passed, 0 failed, 1 ignored
- Policy checks: ✅ passed

### Full CI Pipeline (`just ci-full`)
✅ **PASSED**
- Format check: ✅ passed
- Clippy (all targets): ✅ passed
- Core tests: ✅ 274 passed, 0 failed, 1 ignored
- LSP tests: ✅ 0 passed, 0 failed, 33 ignored (label-gated by design)
- Documentation build: ✅ passed

---

## Recent Changes Landed

### PR #214: CI/Lockfile Hardening
- Merged: 2025-11-13
- Commit: `3d832742`
- Tag: `ci-lockfile-hardening-2025-11-12`
- **Changes**:
  - Lockfile enforcement (`--locked`)
  - ExitStatus cross-platform policy
  - Adaptive threading configuration
  - Local CI infrastructure (`just ci-gate`, `just ci-full`)

### PR #215: Flaky Timeout Fix
- Merged: 2025-11-13
- Commit: `95137284`
- Issue: #200
- **Changes**:
  - Adaptive timeout for `test_emoji_and_special_unicode`
  - Thread-aware timeout scaling (60s/45s/30s)
  - Regression test for timeout calculation

### PR #216: Document Highlighting Fix
- Merged: 2025-11-13
- Commit: `2aff88e8`
- Issue: #191
- **Changes**:
  - Added 11 missing NodeKind handlers
  - Fixed highlighting for statement modifiers, regex ops, control flow
  - Added regression test for statement modifiers

---

## Test Summary

| Package | Tests | Status |
|---------|-------|--------|
| perl-parser | 274 passed, 0 failed, 1 ignored | ✅ |
| perl-lsp | 0 passed, 0 failed, 33 ignored | ✅ (label-gated) |
| **Total** | **274 passed, 0 failed, 34 ignored** | ✅ |

---

## Known State

### GitHub Actions Status
- **Status**: DISABLED (billing issue)
- **Impact**: All CI validation performed locally via `just ci-gate` / `just ci-full`
- **Protocol**: [Local CI Protocol](LOCAL_CI_PROTOCOL.md)

### Quality Gates
- ✅ Format compliance (cargo fmt)
- ✅ Clippy lints (zero warnings with `-A missing_docs`)
- ✅ Unit tests (274 passing)
- ✅ Integration tests (label-gated, infrastructure validated)
- ✅ Documentation builds (no errors)
- ✅ Policy enforcement (ExitStatus cross-platform checks)

### LSP Feature Coverage
- ~92% functional (document highlighting now working)
- Cross-file navigation: ✅ 98% reference coverage
- Code actions: ✅ comprehensive refactoring support
- Semantic tokens: ✅ thread-safe, 2.826µs average

---

## Next Steps

### Immediate (Sprint A - Parser Foundation)
1. **Issue #182**: Statement tracker implementation
   - Break into 4 slices: data structures → plumbing → semantics → tests
   - Each slice: branch → implement → `ci-gate` → merge
2. Continue systematic issue resolution per Sprint A plan

### When GitHub Actions Resumes
1. Re-enable CI matrix on master
2. Run full matrix validation
3. Compare against local baselines (this document + merge checklists)
4. Address any divergence
5. Archive local CI protocol documentation

---

## References

- [Local CI Protocol](LOCAL_CI_PROTOCOL.md)
- [Merge Checklist #214](MERGE_CHECKLIST_214.md)
- [CI Status Report](../CI_STATUS_214.md)
- [Contributing Guidelines](../../CONTRIBUTING.md)

---

**Validated by**: Steven (via Claude Code)
**Baseline established**: 2025-11-13 02:25 UTC
