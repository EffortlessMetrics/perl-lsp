<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Stability Statement - Perl LSP Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Comprehensive documentation for the perl-lsp project - a production-ready Perl Language Server Protocol implementation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Perl LSP Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/EffortlessMetrics/tree-sitter-perl-rs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="api-stability--version-policy---v10-ga-lock"><a class="header" href="#api-stability--version-policy---v10-ga-lock">API Stability &amp; Version Policy - v1.0 GA-Lock</a></h1>
<p><strong>MSRV:</strong> 1.89 • <strong>Edition:</strong> 2024 • <strong>Status:</strong> General Availability (GA)</p>
<h2 id="executive-summary"><a class="header" href="#executive-summary">Executive Summary</a></h2>
<p>This document defines the <strong>GA-lock</strong> stability guarantees for Perl LSP v1.0 and beyond. GA-lock establishes formal contracts for API stability, wire protocol invariants, versioning policy, and platform support that users can depend on for production deployments.</p>
<p><strong>What “GA-lock” means:</strong></p>
<ul>
<li>Published crate APIs are stable under semantic versioning</li>
<li>LSP wire protocol capabilities are locked and versioned</li>
<li>Breaking changes follow strict deprecation cycles</li>
<li>Minimum supported platforms are explicitly documented</li>
<li>Binary and source distribution commitments are defined</li>
</ul>
<hr />
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ol>
<li><a href="#published-artifacts">Published Artifacts</a></li>
<li><a href="#ga-lock-guarantees">GA-Lock Guarantees</a></li>
<li><a href="#semantic-versioning-policy">Semantic Versioning Policy</a></li>
<li><a href="#wire-protocol-invariants">Wire Protocol Invariants</a></li>
<li><a href="#platform-support-matrix">Platform Support Matrix</a></li>
<li><a href="#api-surface-stability">API Surface Stability</a></li>
<li><a href="#breaking-changes-policy">Breaking Changes Policy</a></li>
<li><a href="#deprecation-process">Deprecation Process</a></li>
<li><a href="#feature-flags">Feature Flags</a></li>
<li><a href="#performance-guarantees">Performance Guarantees</a></li>
<li><a href="#security-support">Security Support</a></li>
<li><a href="#migration-guides">Migration Guides</a></li>
</ol>
<hr />
<h2 id="published-artifacts"><a class="header" href="#published-artifacts">Published Artifacts</a></h2>
<h3 id="what-we-ship-v10"><a class="header" href="#what-we-ship-v10">What We Ship (v1.0+)</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Distribution</th><th>Format</th><th>Support Level</th><th>Update Cadence</th></tr></thead><tbody>
<tr><td><strong>Binaries</strong></td><td>GitHub Releases (tar.gz, zip)</td><td>Production</td><td>Every release</td></tr>
<tr><td><strong>Crates</strong></td><td>crates.io</td><td>Production</td><td>Every release</td></tr>
<tr><td><strong>VS Code Extension</strong></td><td>VS Marketplace</td><td>Production</td><td>Every release</td></tr>
<tr><td><strong>Homebrew</strong></td><td>Formula (macOS/Linux)</td><td>Production</td><td>Automated on release</td></tr>
<tr><td><strong>Source</strong></td><td>GitHub releases + tags</td><td>Production</td><td>Every release</td></tr>
</tbody></table>
</div>
<h3 id="published-crates-v100-ga"><a class="header" href="#published-crates-v100-ga">Published Crates (v1.0.0 GA)</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Crate</th><th>Version</th><th>Purpose</th><th>Stability</th><th>SemVer Commitment</th></tr></thead><tbody>
<tr><td><a href="https://crates.io/crates/perl-parser">perl-parser</a></td><td>1.0.0</td><td>Parser &amp; AST</td><td><strong>GA-locked</strong></td><td>Yes - strict SemVer</td></tr>
<tr><td><a href="https://crates.io/crates/perl-lexer">perl-lexer</a></td><td>1.0.0</td><td>Tokenizer</td><td><strong>GA-locked</strong></td><td>Yes - strict SemVer</td></tr>
<tr><td><a href="https://crates.io/crates/perl-lsp">perl-lsp</a></td><td>1.0.0</td><td>LSP Server Binary</td><td><strong>GA-locked</strong></td><td>Yes - strict SemVer</td></tr>
<tr><td><a href="https://crates.io/crates/perl-corpus">perl-corpus</a></td><td>1.0.0</td><td>Test corpus</td><td><strong>GA-locked</strong></td><td>Yes - best-effort API</td></tr>
<tr><td><a href="https://crates.io/crates/perl-dap">perl-dap</a></td><td>0.2.0</td><td>Debug Adapter</td><td><strong>Preview</strong></td><td>No - pre-1.0</td></tr>
<tr><td><a href="https://crates.io/crates/perl-parser-pest">perl-parser-pest</a></td><td>1.0.0</td><td>Legacy parser</td><td><strong>Deprecated</strong></td><td>Maintenance only</td></tr>
</tbody></table>
</div>
<p><strong>Note:</strong> Only crates at 1.0+ provide GA-lock guarantees. <code>perl-dap</code> remains in preview with no stability guarantees until 1.0.</p>
<hr />
<h2 id="ga-lock-guarantees"><a class="header" href="#ga-lock-guarantees">GA-Lock Guarantees</a></h2>
<h3 id="what-ga-lock-means"><a class="header" href="#what-ga-lock-means">What GA-Lock Means</a></h3>
<p><strong>GA-lock</strong> is a formal stability contract that guarantees:</p>
<ol>
<li><strong>API Stability</strong>: Public APIs in GA-locked crates will not break without major version bump</li>
<li><strong>Wire Protocol Stability</strong>: LSP capabilities advertised in v1.0 will remain compatible through all v1.x releases</li>
<li><strong>Behavioral Compatibility</strong>: Bug-fix releases will not change semantics of correct programs</li>
<li><strong>MSRV Stability</strong>: Minimum Supported Rust Version only increases in minor releases with 6-month notice</li>
<li><strong>Data Format Stability</strong>: Serialization formats (S-expressions, JSON-RPC) remain parseable by older clients</li>
<li><strong>Error Model Stability</strong>: Error types and recovery behavior remain consistent</li>
</ol>
<h3 id="what-ga-lock-does-not-guarantee"><a class="header" href="#what-ga-lock-does-not-guarantee">What GA-Lock Does NOT Guarantee</a></h3>
<ul>
<li><strong>Performance</strong>: Performance improvements may change timing characteristics</li>
<li><strong>Diagnostics</strong>: Warning messages and diagnostic text may change in patch releases</li>
<li><strong>Internal APIs</strong>: <code>#[doc(hidden)]</code>, <code>pub(crate)</code>, and test-only APIs are unstable</li>
<li><strong>Experimental Features</strong>: Features marked <code>experimental</code> or behind unstable feature flags</li>
<li><strong>Output Formatting</strong>: Pretty-printed output (debug formatting, error displays) may change</li>
<li><strong>Resource Usage</strong>: Memory/CPU usage patterns may change with optimizations</li>
</ul>
<hr />
<h2 id="semantic-versioning-policy"><a class="header" href="#semantic-versioning-policy">Semantic Versioning Policy</a></h2>
<p>Perl LSP strictly follows <a href="https://semver.org/">Semantic Versioning 2.0.0</a> with the following interpretation:</p>
<h3 id="major-releases-x00---breaking-changes-allowed"><a class="header" href="#major-releases-x00---breaking-changes-allowed">Major Releases (X.0.0) - Breaking Changes Allowed</a></h3>
<p><strong>Breaking changes include:</strong></p>
<ul>
<li>Removing public API functions, types, or modules</li>
<li>Changing function signatures in incompatible ways</li>
<li>Changing behavior of existing APIs in ways that break correct programs</li>
<li>Removing or renaming LSP capabilities advertised to clients</li>
<li>Changing wire protocol message formats</li>
<li>Bumping MSRV beyond current stable Rust</li>
<li>Removing feature flags or changing their semantics</li>
</ul>
<p><strong>Major release cadence:</strong> Approximately every 18-24 months, aligned with significant Rust ecosystem changes.</p>
<p><strong>Example breaking changes:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// v1.x.x
pub fn parse(source: &amp;str) -&gt; Result&lt;Node, ParseError&gt;

// v2.0.0 - signature change (BREAKING)
pub fn parse(source: &amp;str, config: &amp;ParseConfig) -&gt; Result&lt;Ast, Error&gt;
<span class="boring">}</span></code></pre></pre>
<h3 id="minor-releases-1y0---additive-changes-only"><a class="header" href="#minor-releases-1y0---additive-changes-only">Minor Releases (1.Y.0) - Additive Changes Only</a></h3>
<p><strong>Allowed changes:</strong></p>
<ul>
<li>Adding new public API functions, types, or modules</li>
<li>Adding new LSP capabilities (backward compatible)</li>
<li>Adding new <code>NodeKind</code> variants or token types</li>
<li>Deprecating APIs (with warnings and migration paths)</li>
<li>Adding optional parameters with defaults</li>
<li>Bumping MSRV with 6-month deprecation notice</li>
<li>Performance improvements that don’t change semantics</li>
<li>Bug fixes that may change behavior of incorrect programs</li>
</ul>
<p><strong>Minor release cadence:</strong> Approximately every 6-8 weeks, driven by feature development.</p>
<p><strong>Example additive changes:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// v1.0.0
pub enum NodeKind {
    Sub,
    Package,
}

// v1.1.0 - new variant (ALLOWED in minor)
pub enum NodeKind {
    Sub,
    Package,
    Async,  // New in 1.1.0
}
<span class="boring">}</span></code></pre></pre>
<p><strong>MSRV Policy for Minor Releases:</strong></p>
<ul>
<li>MSRV may increase in minor releases ONLY</li>
<li>6-month deprecation notice required before MSRV bump</li>
<li>Notice appears in release notes and <code>Cargo.toml</code> comments</li>
<li>Users can pin to older minor versions if MSRV is a concern</li>
</ul>
<h3 id="patch-releases-12z---bug-fixes-only"><a class="header" href="#patch-releases-12z---bug-fixes-only">Patch Releases (1.2.Z) - Bug Fixes Only</a></h3>
<p><strong>Allowed changes:</strong></p>
<ul>
<li>Bug fixes that restore documented behavior</li>
<li>Security fixes (may change behavior of vulnerable code)</li>
<li>Documentation corrections</li>
<li>Internal refactoring with no observable effects</li>
<li>Diagnostic message improvements</li>
<li>Performance optimizations that don’t change semantics</li>
</ul>
<p><strong>Patch release cadence:</strong> As needed for critical bugs and security issues.</p>
<p><strong>MSRV guarantee:</strong> Patch releases NEVER increase MSRV.</p>
<hr />
<h2 id="wire-protocol-invariants"><a class="header" href="#wire-protocol-invariants">Wire Protocol Invariants</a></h2>
<h3 id="lsp-protocol-stability"><a class="header" href="#lsp-protocol-stability">LSP Protocol Stability</a></h3>
<p>The LSP server advertises capabilities via the <code>initialize</code> handshake. <strong>GA-lock guarantees:</strong></p>
<ol>
<li><strong>Capability Stability</strong>: Once advertised in v1.0, capabilities remain available through all v1.x releases</li>
<li><strong>Request/Response Compatibility</strong>: Message formats remain backward compatible</li>
<li><strong>Method Names</strong>: LSP method names (e.g., <code>textDocument/completion</code>) never change in v1.x</li>
<li><strong>Capability Negotiation</strong>: Servers honor client capabilities for conditional feature support</li>
<li><strong>Error Codes</strong>: LSP error codes remain stable (may add new codes, never remove)</li>
</ol>
<h3 id="capability-snapshot-v100"><a class="header" href="#capability-snapshot-v100">Capability Snapshot (v1.0.0)</a></h3>
<p>The canonical capability set is defined in <a href="../features.toml"><code>features.toml</code></a>. As of v1.0.0:</p>
<div class="table-wrapper"><table><thead><tr><th>Area</th><th>Capabilities</th><th>GA Status</th></tr></thead><tbody>
<tr><td><strong>Text Document</strong></td><td>41 features</td><td>✅ GA-locked</td></tr>
<tr><td><strong>Workspace</strong></td><td>26 features</td><td>✅ GA-locked</td></tr>
<tr><td><strong>Window</strong></td><td>9 features</td><td>✅ GA-locked</td></tr>
<tr><td><strong>Protocol</strong></td><td>9 features</td><td>✅ GA-locked</td></tr>
<tr><td><strong>Notebook</strong></td><td>2 features</td><td>⚠️ Preview (unstable)</td></tr>
<tr><td><strong>Debug</strong></td><td>2 features</td><td>⚠️ Preview (unstable)</td></tr>
</tbody></table>
</div>
<p><strong>Total GA-locked capabilities:</strong> 88/89 (99% of LSP 3.18 protocol)</p>
<p><strong>Verification:</strong></p>
<pre><code class="language-bash"># Validate capability snapshot against implementation
just status-check

# View current advertised capabilities
cargo run -p perl-lsp -- --stdio &lt; /dev/null 2&gt;&amp;1 | grep -A 100 "capabilities"
</code></pre>
<h3 id="wire-protocol-testing"><a class="header" href="#wire-protocol-testing">Wire Protocol Testing</a></h3>
<p>All LSP capabilities have integration tests that verify wire protocol compatibility:</p>
<pre><code class="language-bash"># Run LSP protocol compliance tests
cargo test -p perl-lsp --test lsp_comprehensive_3_17_test
cargo test -p perl-lsp --test lsp_*_tests

# Verify capability advertise/implement alignment
just ci-gate  # Includes LSP semantic tests
</code></pre>
<p><strong>Test coverage requirement:</strong> All GA-locked capabilities must have integration tests covering:</p>
<ul>
<li>Initialize handshake advertising the capability</li>
<li>Successful request/response round-trips</li>
<li>Error handling and edge cases</li>
<li>Client capability negotiation</li>
</ul>
<hr />
<h2 id="platform-support-matrix"><a class="header" href="#platform-support-matrix">Platform Support Matrix</a></h2>
<h3 id="tier-1-platforms-guaranteed-support"><a class="header" href="#tier-1-platforms-guaranteed-support">Tier 1 Platforms (Guaranteed Support)</a></h3>
<p>Tier 1 platforms receive:</p>
<ul>
<li>Pre-built binaries for every release</li>
<li>CI testing on every commit</li>
<li>Bug fixes within 7 days of confirmed issue</li>
<li>Performance optimization attention</li>
<li>Security patches within 24 hours of disclosure</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>Platform</th><th>Architecture</th><th>Toolchain</th><th>Binary Format</th><th>Support Level</th></tr></thead><tbody>
<tr><td><strong>Linux (GNU)</strong></td><td>x86_64</td><td>stable</td><td>ELF (dynamic)</td><td>✅ Tier 1</td></tr>
<tr><td><strong>Linux (musl)</strong></td><td>x86_64</td><td>stable</td><td>ELF (static)</td><td>✅ Tier 1</td></tr>
<tr><td><strong>Linux (GNU)</strong></td><td>aarch64</td><td>stable</td><td>ELF (dynamic)</td><td>✅ Tier 1</td></tr>
<tr><td><strong>macOS</strong></td><td>x86_64</td><td>stable</td><td>Mach-O</td><td>✅ Tier 1</td></tr>
<tr><td><strong>macOS</strong></td><td>aarch64</td><td>stable</td><td>Mach-O</td><td>✅ Tier 1</td></tr>
<tr><td><strong>Windows</strong></td><td>x86_64</td><td>stable-msvc</td><td>PE (MSVC)</td><td>✅ Tier 1</td></tr>
</tbody></table>
</div>
<p><strong>Build targets:</strong></p>
<pre><code class="language-bash"># Tier 1 platforms
x86_64-unknown-linux-gnu      # Ubuntu 22.04+ (GLIBC 2.35+)
x86_64-unknown-linux-musl     # Alpine Linux, static binary
aarch64-unknown-linux-gnu     # ARM64 Linux (Raspberry Pi 4+)
x86_64-apple-darwin           # Intel Mac (macOS 10.15+)
aarch64-apple-darwin          # Apple Silicon (macOS 11.0+)
x86_64-pc-windows-msvc        # Windows 10+ (x64)
</code></pre>
<h3 id="tier-2-platforms-best-effort-support"><a class="header" href="#tier-2-platforms-best-effort-support">Tier 2 Platforms (Best-Effort Support)</a></h3>
<p>Tier 2 platforms receive:</p>
<ul>
<li>Source code builds documented</li>
<li>Community-contributed bug fixes accepted</li>
<li>No pre-built binaries (users build from source)</li>
<li>No CI coverage guarantee</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>Platform</th><th>Architecture</th><th>Build Method</th><th>Notes</th></tr></thead><tbody>
<tr><td>Linux (GNU)</td><td>i686</td><td>cargo build</td><td>32-bit x86</td></tr>
<tr><td>Linux (musl)</td><td>aarch64</td><td>cargo build</td><td>ARM64 Alpine</td></tr>
<tr><td>FreeBSD</td><td>x86_64</td><td>cargo build</td><td>Community supported</td></tr>
<tr><td>NetBSD</td><td>x86_64</td><td>cargo build</td><td>Community supported</td></tr>
<tr><td>OpenBSD</td><td>x86_64</td><td>cargo build</td><td>Community supported</td></tr>
<tr><td>Windows (GNU)</td><td>x86_64</td><td>cargo build</td><td>MinGW toolchain</td></tr>
</tbody></table>
</div>
<h3 id="unsupported-platforms"><a class="header" href="#unsupported-platforms">Unsupported Platforms</a></h3>
<p>Platforms without Rust compiler support are not supported:</p>
<ul>
<li>32-bit ARM (armv7)</li>
<li>MIPS architectures</li>
<li>RISC-V (planned Tier 2 when Rust stabilizes)</li>
<li>PowerPC architectures</li>
<li>WASM (parser may work, LSP server does not)</li>
</ul>
<h3 id="platform-testing-policy"><a class="header" href="#platform-testing-policy">Platform Testing Policy</a></h3>
<p><strong>Tier 1 platforms:</strong></p>
<ul>
<li>All releases tested on CI before release</li>
<li>Gate checks (<code>just ci-gate</code>) must pass on all Tier 1 platforms</li>
<li>Performance benchmarks tracked for Linux x86_64 and macOS aarch64</li>
</ul>
<p><strong>Tier 2 platforms:</strong></p>
<ul>
<li>Community contributors verify builds</li>
<li>Issues accepted but prioritized below Tier 1</li>
<li>May be promoted to Tier 1 with sustained community support</li>
</ul>
<hr />
<h2 id="api-surface-stability"><a class="header" href="#api-surface-stability">API Surface Stability</a></h2>
<h3 id="perl-parser-stable-apis"><a class="header" href="#perl-parser-stable-apis">perl-parser Stable APIs</a></h3>
<p><strong>Core parsing API (GA-locked since v1.0.0):</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Parser construction and execution
pub struct Parser { /* ... */ }
impl Parser {
    pub fn new() -&gt; Self;
    pub fn parse(&amp;mut self, source: &amp;str) -&gt; Result&lt;Node, ParseError&gt;;
}

// AST representation
#[non_exhaustive]
pub enum NodeKind {
    // Core variants (stable)
    Sub, Package, Use, If, While, For, Foreach,
    BinaryOp, UnaryOp, Assign, Call, Var, Literal,
    Block, Statement, Expression,
    // ... additional variants may be added in minor releases
}

pub struct Node {
    pub kind: NodeKind,
    pub children: Vec&lt;Node&gt;,
    pub source_location: SourceLocation,
    // ... additional fields may be added (non-breaking)
}

// Error handling (stable)
pub struct ParseError {
    pub message: String,
    pub location: SourceLocation,
}

// Position conversion utilities (stable)
pub fn offset_to_position(source: &amp;str, offset: usize) -&gt; Position;
pub fn position_to_offset(source: &amp;str, position: Position) -&gt; Option&lt;usize&gt;;

// S-expression serialization (stable)
impl Node {
    pub fn to_sexp(&amp;self) -&gt; String;
}
<span class="boring">}</span></code></pre></pre>
<p><strong>Stability guarantees:</strong></p>
<ul>
<li><code>Parser::parse()</code> signature never changes in v1.x</li>
<li><code>NodeKind</code> is <code>#[non_exhaustive]</code> - new variants may be added</li>
<li><code>Node</code> structure fields are public and stable</li>
<li><code>to_sexp()</code> output format remains parseable (modulo whitespace)</li>
<li>Position helpers maintain UTF-8 ↔ UTF-16 conversion accuracy</li>
</ul>
<p><strong>Breaking change examples (v2.0.0 only):</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// BREAKING: Changing parse signature
pub fn parse(&amp;mut self, source: &amp;str, config: &amp;ParseConfig) -&gt; Result&lt;Ast, Error&gt;

// BREAKING: Removing NodeKind variant
pub enum NodeKind {
    Sub,
    // Package removed (BREAKING)
}

// BREAKING: Changing Node field types
pub struct Node {
    pub kind: NodeKind,
    pub children: Arc&lt;[Node]&gt;,  // Changed from Vec&lt;Node&gt; (BREAKING)
}
<span class="boring">}</span></code></pre></pre>
<h3 id="perl-lexer-stable-apis"><a class="header" href="#perl-lexer-stable-apis">perl-lexer Stable APIs</a></h3>
<p><strong>Tokenization API (GA-locked since v1.0.0):</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct PerlLexer&lt;'a&gt; { /* ... */ }

impl&lt;'a&gt; PerlLexer&lt;'a&gt; {
    pub fn new(source: &amp;'a str) -&gt; Self;
    pub fn next_token(&amp;mut self) -&gt; Option&lt;Token&lt;'a&gt;&gt;;
}

pub struct Token&lt;'a&gt; {
    pub kind: TokenType,
    pub span: &amp;'a str,
    pub offset: usize,
}

#[non_exhaustive]
pub enum TokenType {
    // Core token types (stable)
    Identifier, Keyword, Operator, Literal,
    Comment, Whitespace, Sigil, Arrow,
    // ... additional types may be added in minor releases
}
<span class="boring">}</span></code></pre></pre>
<p><strong>Stability guarantees:</strong></p>
<ul>
<li>Token iteration interface (<code>next_token()</code>) remains stable</li>
<li><code>TokenType</code> is <code>#[non_exhaustive]</code> - new types may be added</li>
<li>Token span lifetime tied to source string (lifetime stability)</li>
</ul>
<h3 id="perl-lsp-binary-interface"><a class="header" href="#perl-lsp-binary-interface">perl-lsp Binary Interface</a></h3>
<p><strong>Command-line interface (GA-locked since v1.0.0):</strong></p>
<pre><code class="language-bash"># Stdio mode (stable)
perl-lsp --stdio

# TCP socket mode (added in v0.9.1, stable in v1.0)
perl-lsp --tcp 127.0.0.1:9257

# Version/help (stable)
perl-lsp --version
perl-lsp --help

# LSP capabilities (stable)
perl-lsp --capabilities  # JSON output of advertised capabilities
</code></pre>
<p><strong>Stability guarantees:</strong></p>
<ul>
<li><code>--stdio</code> flag and behavior remain stable</li>
<li>Exit codes follow LSP specification (0 = success, 1 = error)</li>
<li>JSON-RPC wire format follows LSP 3.18 specification</li>
<li>Configuration options loaded from <code>workspace/configuration</code></li>
</ul>
<p><strong>Configuration schema stability:</strong></p>
<pre><code class="language-json">{
  "perl-lsp": {
    "trace.server": "off|messages|verbose",
    "diagnostics.enable": true,
    "completion.enable": true,
    // ... additional options may be added (non-breaking)
  }
}
</code></pre>
<hr />
<h2 id="breaking-changes-policy"><a class="header" href="#breaking-changes-policy">Breaking Changes Policy</a></h2>
<h3 id="pre-10-policy-historical"><a class="header" href="#pre-10-policy-historical">Pre-1.0 Policy (Historical)</a></h3>
<p><strong>v0.x releases (before v1.0):</strong></p>
<ul>
<li>Breaking changes allowed in minor releases (0.Y.0)</li>
<li>Deprecation warnings provided for at least one minor release</li>
<li>CHANGELOG documents all breaking changes</li>
<li>Migration guides provided for major API shifts</li>
</ul>
<p><strong>Example from v0.9.0:</strong></p>
<pre><code class="language-markdown">### Breaking Changes
- `Parser::parse()` now returns `Result&lt;Node, ParseError&gt;` instead of `Option&lt;Node&gt;`
- Migration: Replace `.unwrap()` with `.expect("parse error")` or proper error handling
</code></pre>
<h3 id="post-10-policy-current"><a class="header" href="#post-10-policy-current">Post-1.0 Policy (Current)</a></h3>
<p><strong>v1.x releases:</strong></p>
<ul>
<li>Breaking changes ONLY allowed in major releases (v2.0.0, v3.0.0, etc.)</li>
<li>Minimum 6-month deprecation cycle required</li>
<li>Deprecated items issue warnings pointing to migration paths</li>
<li><code>#[deprecated]</code> attribute used with clear <code>since</code> and <code>note</code> values</li>
</ul>
<p><strong>Deprecation example:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[deprecated(since = "1.2.0", note = "use `Parser::parse_with_config()` instead")]
pub fn parse_legacy(source: &amp;str) -&gt; Result&lt;Node, ParseError&gt; {
    // Still works, but warns at compile time
}
<span class="boring">}</span></code></pre></pre>
<p><strong>Deprecation timeline:</strong></p>
<ol>
<li><strong>Release N (e.g., v1.2.0):</strong> Deprecation warning added, alternative API introduced</li>
<li><strong>Release N+1 (e.g., v1.3.0, 6+ months later):</strong> Deprecation still present, docs updated</li>
<li><strong>Release M (v2.0.0, 12+ months after N):</strong> Deprecated API removed</li>
</ol>
<hr />
<h2 id="deprecation-process"><a class="header" href="#deprecation-process">Deprecation Process</a></h2>
<h3 id="how-deprecations-work"><a class="header" href="#how-deprecations-work">How Deprecations Work</a></h3>
<ol>
<li>
<p><strong>Announcement (release notes):</strong></p>
<pre><code class="language-markdown">### Deprecated
- `Parser::parse_legacy()` deprecated in favor of `Parser::parse_with_config()`
- Migration guide: https://example.com/migration/v1.2-parse-config
</code></pre>
</li>
<li>
<p><strong>Compiler warnings:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[deprecated(since = "1.2.0", note = "use `parse_with_config()` instead")]
pub fn parse_legacy(source: &amp;str) -&gt; Result&lt;Node, ParseError&gt;
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>Documentation updates:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// **DEPRECATED:** This function is deprecated since v1.2.0.
/// Use [`parse_with_config`](Self::parse_with_config) instead.
///
/// This function will be removed in v2.0.0.
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>Migration guides:</strong></p>
<ul>
<li>Dedicated section in <code>docs/MIGRATION.md</code></li>
<li>Code examples showing before/after</li>
<li>Automated migration tools where feasible (cargo-fix compatible)</li>
</ul>
</li>
<li>
<p><strong>Removal (major version only):</strong></p>
<ul>
<li>Removed in next major release (v2.0.0)</li>
<li>CHANGELOG documents removal with migration path</li>
</ul>
</li>
</ol>
<h3 id="deprecation-policy-for-lsp-capabilities"><a class="header" href="#deprecation-policy-for-lsp-capabilities">Deprecation Policy for LSP Capabilities</a></h3>
<p><strong>Capability deprecation follows a stricter process:</strong></p>
<ol>
<li><strong>Announcement (6 months before):</strong> Capability marked deprecated in <code>initialize</code> response</li>
<li><strong>Documentation:</strong> Alternative capability documented in LSP implementation guide</li>
<li><strong>Support period:</strong> Deprecated capability remains functional for 12+ months</li>
<li><strong>Removal:</strong> Capability removed only in major version (v2.0.0)</li>
</ol>
<p><strong>Example capability deprecation:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// v1.5.0 - deprecation announced
server_capabilities.deprecated_capabilities = Some(vec![
    "textDocument/oldFeature".to_string()
]);

// v2.0.0 - capability removed
// Capability no longer advertised or implemented
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="feature-flags"><a class="header" href="#feature-flags">Feature Flags</a></h2>
<h3 id="stable-feature-flags-v10"><a class="header" href="#stable-feature-flags-v10">Stable Feature Flags (v1.0+)</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Flag</th><th>Purpose</th><th>Stability</th><th>Default</th></tr></thead><tbody>
<tr><td><code>pure-rust</code></td><td>Pest-based parser (v2)</td><td><strong>Deprecated</strong></td><td>No</td></tr>
<tr><td><code>ts-compat</code></td><td>Tree-sitter compatibility mode</td><td><strong>Stable</strong></td><td>No</td></tr>
<tr><td><code>cli</code></td><td>Build command-line binaries</td><td><strong>Stable</strong></td><td>Yes</td></tr>
</tbody></table>
</div>
<h3 id="unstable-feature-flags"><a class="header" href="#unstable-feature-flags">Unstable Feature Flags</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Flag</th><th>Purpose</th><th>Stability</th><th>Default</th></tr></thead><tbody>
<tr><td><code>workspace</code></td><td>Cross-file analysis (experimental)</td><td><strong>Unstable</strong></td><td>No</td></tr>
<tr><td><code>expose_lsp_test_api</code></td><td>Test-only LSP internals</td><td><strong>Test-only</strong></td><td>No</td></tr>
</tbody></table>
</div>
<p><strong>Stability guarantees:</strong></p>
<ul>
<li><strong>Stable flags:</strong> Follow semantic versioning, may not be removed in v1.x</li>
<li><strong>Unstable flags:</strong> May change behavior or be removed in minor releases</li>
<li><strong>Test-only flags:</strong> No stability guarantees, internal use only</li>
<li><strong>Deprecated flags:</strong> Supported for 12+ months before removal</li>
</ul>
<p><strong>Feature flag usage:</strong></p>
<pre><code class="language-toml"># Cargo.toml
[dependencies]
perl-parser = { version = "1.0", features = ["ts-compat"] }
</code></pre>
<p><strong>Deprecation path:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// v1.0 - stable feature
#[cfg(feature = "ts-compat")]
pub fn tree_sitter_mode() -&gt; bool { true }

// v1.5 - deprecation warning
#[deprecated(since = "1.5.0", note = "ts-compat is deprecated, use default parser")]
#[cfg(feature = "ts-compat")]
pub fn tree_sitter_mode() -&gt; bool { true }

// v2.0 - feature removed
// #[cfg(feature = "ts-compat")] - removed entirely
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="performance-guarantees"><a class="header" href="#performance-guarantees">Performance Guarantees</a></h2>
<h3 id="complexity-guarantees-ga-locked"><a class="header" href="#complexity-guarantees-ga-locked">Complexity Guarantees (GA-locked)</a></h3>
<p><strong>Parser performance (v1.0+):</strong></p>
<ul>
<li><strong>Time complexity:</strong> O(n) in input size for valid Perl code</li>
<li><strong>Space complexity:</strong> O(n) for AST construction (no exponential blowups)</li>
<li><strong>Streaming:</strong> Parser does not require entire file in memory (incremental parsing)</li>
</ul>
<p><strong>LSP response times (v1.0+):</strong></p>
<ul>
<li><strong>Single-file operations:</strong> &lt;50ms for files &lt;10K lines (p95)</li>
<li><strong>Workspace indexing:</strong> &lt;100ms initial index, &lt;10ms incremental (p95)</li>
<li><strong>Completion:</strong> &lt;20ms typical, &lt;50ms worst-case (p95)</li>
<li><strong>Go-to-definition:</strong> &lt;10ms single-file, &lt;30ms cross-file (p95)</li>
</ul>
<p><strong>Measured performance (v1.0.0 baseline):</strong></p>
<div class="table-wrapper"><table><thead><tr><th>File Size</th><th>Parse Time (p50)</th><th>Parse Time (p95)</th></tr></thead><tbody>
<tr><td>100 lines</td><td>6-8µs</td><td>12µs</td></tr>
<tr><td>1K lines</td><td>12-18µs</td><td>25µs</td></tr>
<tr><td>10K lines</td><td>150-200µs</td><td>300µs</td></tr>
</tbody></table>
</div>
<p><strong>Verification:</strong></p>
<pre><code class="language-bash"># Run performance benchmarks
cargo bench -p perl-parser

# LSP performance tests
RUST_TEST_THREADS=2 cargo test -p perl-lsp --test lsp_performance_tests
</code></pre>
<h3 id="performance-regression-policy"><a class="header" href="#performance-regression-policy">Performance Regression Policy</a></h3>
<p><strong>Performance is not API:</strong></p>
<ul>
<li>Performance improvements are allowed in patch releases</li>
<li>Performance regressions &gt;20% are considered bugs</li>
<li>Benchmarks tracked in CI for Tier 1 platforms (Linux x86_64, macOS aarch64)</li>
</ul>
<p><strong>Performance bug reporting:</strong></p>
<ul>
<li>File issue with reproducible benchmark</li>
<li>Include platform, Rust version, and file size</li>
<li>P0 if regression &gt;50%, P1 if regression &gt;20%</li>
</ul>
<hr />
<h2 id="security-support"><a class="header" href="#security-support">Security Support</a></h2>
<h3 id="security-policy-v10"><a class="header" href="#security-policy-v10">Security Policy (v1.0+)</a></h3>
<p><strong>Supported versions:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Security Fixes</th><th>Support Duration</th></tr></thead><tbody>
<tr><td>1.x (latest)</td><td>✅ Yes</td><td>Ongoing</td></tr>
<tr><td>1.x (previous minor)</td><td>✅ Yes</td><td>6 months after next minor</td></tr>
<tr><td>0.9.x</td><td>⚠️ Critical only</td><td>Until 2027-01-01</td></tr>
<tr><td>0.8.x</td><td>❌ No</td><td>End of life</td></tr>
</tbody></table>
</div>
<p><strong>Security response times:</strong></p>
<ul>
<li><strong>Critical (RCE, privilege escalation):</strong> Patch within 24 hours, emergency release</li>
<li><strong>High (data exposure, DoS):</strong> Patch within 7 days, expedited release</li>
<li><strong>Medium (info disclosure):</strong> Patch within 30 days, regular release cycle</li>
<li><strong>Low (minor issues):</strong> Patch in next scheduled release</li>
</ul>
<h3 id="vulnerability-disclosure"><a class="header" href="#vulnerability-disclosure">Vulnerability Disclosure</a></h3>
<p><strong>Report security issues to:</strong> security@perl-lsp.org (or GitHub Security Advisories)</p>
<p><strong>Disclosure process:</strong></p>
<ol>
<li>Reporter sends encrypted email (PGP key on website)</li>
<li>Maintainers acknowledge within 24 hours</li>
<li>Investigation and patch development (private repository)</li>
<li>Coordinated disclosure 7-14 days after patch release</li>
<li>CVE assignment and public advisory</li>
</ol>
<h3 id="security-hardening-v10"><a class="header" href="#security-hardening-v10">Security Hardening (v1.0+)</a></h3>
<p><strong>Production hardening commitments:</strong></p>
<ul>
<li><strong>No panics on invalid input:</strong> Parser returns <code>Result</code> for all malformed input</li>
<li><strong>No unwrap/expect in production code:</strong> Enforced by CI (see Issue #143)</li>
<li><strong>Path traversal protection:</strong> All file operations validate paths (PR #388)</li>
<li><strong>Command injection hardening:</strong> No shell interpolation (PR #332)</li>
<li><strong>Memory safety:</strong> Rust memory safety + additional bounds checking</li>
<li><strong>Resource limits:</strong> Configurable limits on recursion depth, file size, workspace size</li>
</ul>
<hr />
<h2 id="migration-guides"><a class="header" href="#migration-guides">Migration Guides</a></h2>
<h3 id="upgrade-paths"><a class="header" href="#upgrade-paths">Upgrade Paths</a></h3>
<p><strong>From v0.9.x to v1.0.0:</strong></p>
<ul>
<li>See <a href="MIGRATION.html"><code>docs/MIGRATION.md</code></a> for detailed migration guide</li>
<li><strong>Breaking changes:</strong> MSRV bumped to 1.89 (Rust 2024 edition)</li>
<li><strong>API changes:</strong> None - v1.0.0 is a stability release</li>
<li><strong>Configuration:</strong> <code>perl-lsp</code> config schema unchanged</li>
</ul>
<p><strong>From v0.8.x to v1.0.0:</strong></p>
<ul>
<li><strong>Position helpers:</strong> <code>offset_to_position()</code> signature changed (v0.8.0)</li>
<li><strong>Error types:</strong> <code>ParseError</code> structure changed (v0.8.5)</li>
<li><strong>LSP capabilities:</strong> 8 capabilities promoted to GA (v0.9.0)</li>
</ul>
<p><strong>From tree-sitter-perl C to perl-parser:</strong></p>
<ul>
<li>See <a href="MIGRATION.html"><code>docs/MIGRATION.md</code></a> section “Migrating from tree-sitter-perl C”</li>
<li><strong>Parser API:</strong> Completely different API surface (not compatible)</li>
<li><strong>Performance:</strong> 4-19x faster with maintained correctness</li>
<li><strong>S-expression output:</strong> Compatible format for test automation</li>
</ul>
<h3 id="version-compatibility-matrix"><a class="header" href="#version-compatibility-matrix">Version Compatibility Matrix</a></h3>
<div class="table-wrapper"><table><thead><tr><th>perl-parser</th><th>perl-lexer</th><th>perl-corpus</th><th>perl-lsp</th><th>MSRV</th><th>Notes</th></tr></thead><tbody>
<tr><td>1.0.x</td><td>1.0.x</td><td>1.0.x</td><td>1.0.x</td><td>1.89</td><td>Current GA (2024 edition)</td></tr>
<tr><td>0.9.x</td><td>0.9.x</td><td>0.9.x</td><td>0.9.x</td><td>1.89</td><td>Previous stable (semantic analyzer)</td></tr>
<tr><td>0.8.x</td><td>0.8.x</td><td>0.8.x</td><td>0.8.x</td><td>1.85</td><td>Previous stable (workspace config)</td></tr>
<tr><td>0.7.x</td><td>0.7.x</td><td>0.7.x</td><td>-</td><td>1.80</td><td>Security fixes only until 2026-04-01</td></tr>
</tbody></table>
</div>
<p><strong>Cross-version compatibility:</strong></p>
<ul>
<li>Patch versions (<code>1.0.Z</code>) are fully compatible</li>
<li>Minor versions (<code>1.Y.0</code>) are backward compatible (additive changes only)</li>
<li>Major versions (<code>X.0.0</code>) may break compatibility</li>
</ul>
<hr />
<h2 id="error-model-stability"><a class="header" href="#error-model-stability">Error Model Stability</a></h2>
<h3 id="parser-error-handling-ga-locked"><a class="header" href="#parser-error-handling-ga-locked">Parser Error Handling (GA-locked)</a></h3>
<p><strong>Guarantees:</strong></p>
<ul>
<li><code>Parser::parse()</code> <strong>never panics</strong> on malformed input</li>
<li>All errors return <code>Result&lt;Node, ParseError&gt;</code> with source location</li>
<li>Error recovery attempts to continue parsing after errors</li>
<li>Error messages may change (not part of stable API)</li>
</ul>
<p><strong>Error structure (stable):</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ParseError {
    pub message: String,         // Human-readable (may change)
    pub location: SourceLocation, // Source position (stable)
}

pub struct SourceLocation {
    pub start: usize,  // UTF-8 byte offset (stable)
    pub end: usize,    // UTF-8 byte offset (stable)
}
<span class="boring">}</span></code></pre></pre>
<h3 id="lsp-server-error-handling-ga-locked"><a class="header" href="#lsp-server-error-handling-ga-locked">LSP Server Error Handling (GA-locked)</a></h3>
<p><strong>Guarantees:</strong></p>
<ul>
<li>LSP server <strong>never panics</strong> on invalid requests</li>
<li>Unknown methods return JSON-RPC error with code <code>-32601</code> (method not found)</li>
<li>Malformed requests return JSON-RPC error with code <code>-32700</code> (parse error)</li>
<li>All errors include structured error information per LSP specification</li>
</ul>
<p><strong>Error codes (stable per LSP spec):</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const PARSE_ERROR: i32 = -32700;
const INVALID_REQUEST: i32 = -32600;
const METHOD_NOT_FOUND: i32 = -32601;
const INVALID_PARAMS: i32 = -32602;
const INTERNAL_ERROR: i32 = -32603;
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="position-encoding-stability"><a class="header" href="#position-encoding-stability">Position Encoding Stability</a></h2>
<h3 id="position-encoding-ga-locked"><a class="header" href="#position-encoding-ga-locked">Position Encoding (GA-locked)</a></h3>
<p><strong>Guarantees (v1.0+):</strong></p>
<ul>
<li><strong>Parser positions:</strong> UTF-8 byte offsets (0-based)</li>
<li><strong>LSP positions:</strong> UTF-16 code unit offsets with 0-based lines/columns</li>
<li><strong>Converters stable:</strong> <code>offset_to_position()</code>, <code>position_to_offset()</code></li>
<li><strong>Line endings:</strong> CRLF and LF both supported transparently</li>
</ul>
<p><strong>Position conversion accuracy:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Stable API (v1.0+)
pub fn offset_to_position(source: &amp;str, offset: usize) -&gt; Position;
pub fn position_to_offset(source: &amp;str, position: Position) -&gt; Option&lt;usize&gt;;

// Guarantees:
// - Handles Unicode grapheme clusters correctly
// - CRLF treated as single line ending
// - UTF-16 surrogate pairs handled correctly
// - Round-trip safety: position_to_offset(offset_to_position(src, off)) == off
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="support-lifecycle"><a class="header" href="#support-lifecycle">Support Lifecycle</a></h2>
<h3 id="version-support-timeline-v10"><a class="header" href="#version-support-timeline-v10">Version Support Timeline (v1.0+)</a></h3>
<p><strong>Long-Term Support (LTS):</strong></p>
<ul>
<li><strong>v1.0.x LTS:</strong> First LTS release, supported until 2028-01-01</li>
<li><strong>LTS policy:</strong> 24-month support window from release date</li>
<li><strong>LTS updates:</strong> Security fixes + critical bugs only</li>
</ul>
<p><strong>Standard Support:</strong></p>
<ul>
<li><strong>Current stable (1.x latest):</strong> Full support (features, bugs, security)</li>
<li><strong>Previous minor (1.x-1):</strong> Bug fixes + security for 6 months</li>
<li><strong>Older minors:</strong> Security fixes only for 12 months</li>
</ul>
<p><strong>Timeline visualization:</strong></p>
<pre><code>2026-01 |---- v1.0.0 LTS ------------------------------------&gt; 2028-01
2026-07 |---- v1.1.0 -----&gt; 2027-01
2027-01 |---- v1.2.0 -----&gt; 2027-07
2027-07 |---- v1.3.0 -----&gt; 2028-01
2028-01 |---- v2.0.0 LTS ------------------------------------&gt; 2030-01

Legend:
|-----&gt; Full support (features, bugs, security)
----&gt; Bug fixes + security
...&gt; Security fixes only
</code></pre>
<h3 id="end-of-life-policy"><a class="header" href="#end-of-life-policy">End of Life Policy</a></h3>
<p><strong>When versions reach end of life:</strong></p>
<ul>
<li>Documented in release notes 3 months before EOL</li>
<li>Security advisory posted if critical vulnerabilities exist</li>
<li>Users encouraged to upgrade to supported version</li>
<li>Source code remains available on GitHub (archived releases)</li>
</ul>
<hr />
<h2 id="how-to-report-stability-issues"><a class="header" href="#how-to-report-stability-issues">How to Report Stability Issues</a></h2>
<h3 id="stability-bug-reports"><a class="header" href="#stability-bug-reports">Stability Bug Reports</a></h3>
<p><strong>What constitutes a stability issue:</strong></p>
<ol>
<li>API breakage in patch or minor release (violates SemVer)</li>
<li>LSP capability removed or broken without major version bump</li>
<li>Wire protocol incompatibility with documented behavior</li>
<li>Performance regression &gt;20% in stable API</li>
<li>MSRV increase in patch release</li>
</ol>
<p><strong>How to report:</strong></p>
<ol>
<li>Check this document for guarantees</li>
<li>File issue with label <code>api-stability</code></li>
<li>Include minimal reproduction</li>
<li>Specify version numbers and feature flags used</li>
<li>Reference relevant section of STABILITY.md</li>
</ol>
<p><strong>Example report:</strong></p>
<pre><code class="language-markdown">Title: [Stability] Parser::parse() signature changed in patch release

Version: v1.0.3 (previous: v1.0.2)
Component: perl-parser

Description:
The signature of `Parser::parse()` changed from:
  v1.0.2: `pub fn parse(&amp;mut self, source: &amp;str) -&gt; Result&lt;Node, ParseError&gt;`
  v1.0.3: `pub fn parse(&amp;mut self, source: &amp;str, config: &amp;Config) -&gt; Result&lt;Node, ParseError&gt;`

This breaks compilation of code using v1.0.2 API.

Violates: Section "Semantic Versioning Policy" - signature changes require major version.

Reproduction: [link to minimal code sample]
</code></pre>
<hr />
<h2 id="verification-and-enforcement"><a class="header" href="#verification-and-enforcement">Verification and Enforcement</a></h2>
<h3 id="automated-stability-checks"><a class="header" href="#automated-stability-checks">Automated Stability Checks</a></h3>
<p><strong>CI enforcement (v1.0+):</strong></p>
<pre><code class="language-bash"># Semantic versioning compliance
cargo semver-checks check-release

# API surface documentation coverage
cargo test --doc
cargo test -p perl-parser --test missing_docs_ac_tests

# LSP capability snapshot validation
just status-check

# Wire protocol compatibility tests
cargo test -p perl-lsp --test lsp_comprehensive_3_17_test
</code></pre>
<p><strong>Pre-release checklist:</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
<code>cargo semver-checks</code> passes (no unexpected breaking changes)</li>
<li><input disabled="" type="checkbox"/>
<code>just ci-gate</code> green on all Tier 1 platforms</li>
<li><input disabled="" type="checkbox"/>
LSP capability snapshot matches <code>features.toml</code></li>
<li><input disabled="" type="checkbox"/>
CHANGELOG documents all changes with SemVer classification</li>
<li><input disabled="" type="checkbox"/>
Migration guide updated for breaking changes (major releases only)</li>
<li><input disabled="" type="checkbox"/>
Performance benchmarks within 20% of previous release</li>
</ul>
<hr />
<h2 id="document-maintenance"><a class="header" href="#document-maintenance">Document Maintenance</a></h2>
<p><strong>This document is authoritative for API stability questions.</strong></p>
<p><strong>Last updated:</strong> 2026-01-22 (v1.0.0 GA-Lock Release)</p>
<p><strong>Document history:</strong></p>
<ul>
<li>2026-01-22: v1.0 GA-Lock comprehensive stability documentation</li>
<li>2025-09-05: v0.8.8 GA production workspace configuration</li>
<li>2025-06-01: v0.8.0 initial stability statement</li>
</ul>
<p><strong>Feedback:</strong> File issues with label <code>documentation</code> for corrections or clarifications.</p>
<hr />
<h2 id="summary-checklist-what-v10-ga-lock-guarantees"><a class="header" href="#summary-checklist-what-v10-ga-lock-guarantees">Summary Checklist: What v1.0 GA-Lock Guarantees</a></h2>
<p>✅ <strong>API Stability:</strong> Public APIs stable under SemVer (breaking changes only in major releases)
✅ <strong>Wire Protocol:</strong> LSP capabilities locked, backward compatible through v1.x
✅ <strong>Platform Support:</strong> 6 Tier 1 platforms with pre-built binaries and CI testing
✅ <strong>Versioning Policy:</strong> Strict SemVer with 6-month deprecation cycles
✅ <strong>Performance:</strong> O(n) parsing, &lt;50ms LSP responses, no exponential blowups
✅ <strong>Security:</strong> 24-hour critical patches, coordinated disclosure, memory safety
✅ <strong>Error Handling:</strong> No panics on invalid input, structured errors with source locations
✅ <strong>MSRV Policy:</strong> Rust 1.89+ (2024 edition), increases only in minor releases with 6-month notice
✅ <strong>Documentation:</strong> Comprehensive migration guides and API documentation
✅ <strong>Testing:</strong> 535+ tests, 100% LSP coverage, integration tests for all capabilities</p>
<p><strong>Verification command:</strong></p>
<pre><code class="language-bash">nix develop -c just ci-gate
</code></pre>
<p>This command validates all GA-lock guarantees before every release.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/milestones.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../reference/upgrading.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/milestones.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../reference/upgrading.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
