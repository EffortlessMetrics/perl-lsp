{
  "schema_version": "1.0.0",
  "metadata": {
    "timestamp": "2026-01-24T16:45:00Z",
    "git_sha": "abc123def4567890abcdef1234567890abcdef12",
    "git_sha_short": "abc123d",
    "git_branch": "feature/new-heredoc-parser",
    "git_dirty": true,
    "toolchain": {
      "rustc_version": "rustc 1.89.0 (ab34567890 2026-01-15)",
      "rustc_channel": "stable",
      "rustc_semver": "1.89.0",
      "cargo_version": "cargo 1.89.0 (ab34567890 2026-01-15)",
      "node_version": null,
      "nix_version": null
    },
    "platform": {
      "os": "linux",
      "os_version": "6.6.87.2-microsoft-standard-WSL2",
      "arch": "x86_64",
      "cpu_cores": 8,
      "memory_gb": 16.0,
      "is_wsl": true
    },
    "environment": {
      "type": "ci",
      "ci_provider": "github-actions",
      "ci_run_id": "12345678901",
      "ci_run_url": "https://github.com/p5-lang/perl-lsp/actions/runs/12345678901",
      "pr_number": 524,
      "nix_shell": false
    },
    "trigger": "ci-pr"
  },
  "gates": [
    {
      "gate_name": "workflow-audit",
      "tier": "pr_fast",
      "status": "pass",
      "required": true,
      "duration_ms": 920,
      "command": "python3 scripts/ci-audit-workflows.py",
      "exit_code": 0,
      "output_summary": "All 21 workflows validated",
      "log_path": "logs/workflow-audit.log",
      "metrics": {
        "files_checked": 21,
        "warnings_count": 0
      },
      "artifacts": []
    },
    {
      "gate_name": "check-nested-lock",
      "tier": "pr_fast",
      "status": "pass",
      "required": true,
      "duration_ms": 95,
      "command": "just ci-check-no-nested-lock",
      "exit_code": 0,
      "output_summary": "No nested lockfiles",
      "log_path": "logs/check-nested-lock.log",
      "metrics": null,
      "artifacts": []
    },
    {
      "gate_name": "fmt",
      "tier": "pr_fast",
      "status": "pass",
      "required": true,
      "duration_ms": 2180,
      "command": "cargo fmt --check --all",
      "exit_code": 0,
      "output_summary": null,
      "log_path": "logs/fmt.log",
      "metrics": {
        "files_checked": 157
      },
      "artifacts": []
    },
    {
      "gate_name": "docs-check",
      "tier": "pr_fast",
      "status": "pass",
      "required": true,
      "duration_ms": 1420,
      "command": "bash ci/check_missing_docs.sh",
      "exit_code": 0,
      "output_summary": "Missing docs baseline: 145 (limit: 150)",
      "log_path": "logs/docs-check.log",
      "metrics": {
        "warnings_count": 145
      },
      "artifacts": []
    },
    {
      "gate_name": "clippy-lib",
      "tier": "merge_gate",
      "status": "pass",
      "required": true,
      "duration_ms": 48300,
      "command": "cargo clippy --workspace --lib --locked -- -D warnings -A missing_docs",
      "exit_code": 0,
      "output_summary": "Finished",
      "log_path": "logs/clippy-lib.log",
      "metrics": {
        "warnings_count": 0,
        "errors_count": 0,
        "memory_peak_mb": 1180.2
      },
      "artifacts": []
    },
    {
      "gate_name": "clippy-prod-no-unwrap",
      "tier": "merge_gate",
      "status": "pass",
      "required": true,
      "duration_ms": 36200,
      "command": "cargo clippy --workspace --lib --bins --no-deps -- -D clippy::unwrap_used -D clippy::expect_used",
      "exit_code": 0,
      "output_summary": "Production code is panic-safe",
      "log_path": "logs/clippy-prod-no-unwrap.log",
      "metrics": {
        "warnings_count": 0,
        "errors_count": 0
      },
      "artifacts": []
    },
    {
      "gate_name": "test-lib",
      "tier": "merge_gate",
      "status": "fail",
      "required": true,
      "duration_ms": 142800,
      "command": "cargo test --workspace --lib --locked",
      "exit_code": 1,
      "output_summary": "failures:\n\n---- perl_parser::heredoc::tests::test_heredoc_with_interpolation stdout ----\nthread 'perl_parser::heredoc::tests::test_heredoc_with_interpolation' panicked at crates/perl-parser/src/heredoc.rs:456:9:\nassertion `left == right` failed\n  left: \"$foo bar\"\n right: \"$foo  bar\"\n\ntest result: FAILED. 845 passed; 2 failed; 23 ignored",
      "log_path": "logs/test-lib.log",
      "metrics": {
        "tests_total": 870,
        "tests_passed": 845,
        "tests_failed": 2,
        "tests_skipped": 0,
        "tests_ignored": 23,
        "memory_peak_mb": 920.4
      },
      "artifacts": ["artifacts/test-results.xml"]
    },
    {
      "gate_name": "policy",
      "tier": "merge_gate",
      "status": "skip",
      "required": true,
      "duration_ms": 0,
      "command": "just ci-policy",
      "exit_code": null,
      "output_summary": "Skipped due to prior failure in required gate: test-lib",
      "log_path": null,
      "metrics": null,
      "artifacts": []
    },
    {
      "gate_name": "lsp-def",
      "tier": "merge_gate",
      "status": "skip",
      "required": true,
      "duration_ms": 0,
      "command": "cargo test -p perl-lsp --test semantic_definition -- --test-threads=1",
      "exit_code": null,
      "output_summary": "Skipped due to prior failure in required gate: test-lib",
      "log_path": null,
      "metrics": null,
      "artifacts": []
    },
    {
      "gate_name": "parser-features-check",
      "tier": "merge_gate",
      "status": "skip",
      "required": true,
      "duration_ms": 0,
      "command": "bash ci/check_parse_errors.sh",
      "exit_code": null,
      "output_summary": "Skipped due to prior failure in required gate: test-lib",
      "log_path": null,
      "metrics": null,
      "artifacts": []
    },
    {
      "gate_name": "features-invariants",
      "tier": "merge_gate",
      "status": "skip",
      "required": true,
      "duration_ms": 0,
      "command": "python3 scripts/check_features_invariants.py",
      "exit_code": null,
      "output_summary": "Skipped due to prior failure in required gate: test-lib",
      "log_path": null,
      "metrics": null,
      "artifacts": []
    }
  ],
  "summary": {
    "total_gates": 11,
    "passed": 6,
    "failed": 1,
    "skipped": 4,
    "timeout": 0,
    "error": 0,
    "total_duration_ms": 231915,
    "tier_results": {
      "pr_fast": {
        "total": 4,
        "passed": 4,
        "failed": 0,
        "skipped": 0,
        "duration_ms": 4615
      },
      "merge_gate": {
        "total": 7,
        "passed": 2,
        "failed": 1,
        "skipped": 4,
        "duration_ms": 227300
      },
      "nightly": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "duration_ms": 0
      },
      "release": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "duration_ms": 0
      }
    },
    "overall_status": "fail",
    "blocking_failures": [
      "test-lib"
    ],
    "aggregate_metrics": {
      "total_tests": 870,
      "total_tests_passed": 845,
      "total_tests_failed": 2,
      "total_warnings": 145,
      "max_memory_mb": 1180.2
    }
  },
  "diff_config": {
    "comparable_fields": [
      "gates[*].gate_name",
      "gates[*].status",
      "gates[*].metrics",
      "summary.overall_status",
      "summary.passed",
      "summary.failed",
      "summary.aggregate_metrics"
    ],
    "ignored_fields": [
      "metadata.timestamp",
      "metadata.git_sha",
      "metadata.git_sha_short",
      "metadata.environment.ci_run_id",
      "metadata.environment.ci_run_url",
      "gates[*].duration_ms",
      "gates[*].log_path",
      "gates[*].output_summary",
      "summary.total_duration_ms"
    ],
    "threshold_fields": {
      "gates[*].metrics.coverage_percent": 0.5,
      "gates[*].metrics.memory_peak_mb": 50
    }
  }
}
