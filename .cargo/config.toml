[alias]
xtask = "run --package xtask --"

# Build configuration
[build]
# Feature flags that should always be enabled
# This ensures AI tools and bare `cargo build` commands use the right features
rustflags = []

# Default target directory (shared across all crates)
target-dir = "target"

# Environment-specific settings
[env]
# Enable backtrace for better debugging
RUST_BACKTRACE = "1"

# Profile configurations
[profile.dev]
# Slightly optimize dev builds for parser performance testing
opt-level = 1
# Keep debug info for better error messages
debug = true

[profile.release]
# Maximum optimization for benchmarking
lto = true
codegen-units = 1
opt-level = 3
# Strip symbols for smaller binaries
strip = true

[profile.bench]
# Ensure benchmarks use maximum optimization
lto = true
codegen-units = 1
opt-level = 3
debug = false

# Custom profile for testing parser performance without full release optimization
[profile.test-perf]
inherits = "release"
lto = false  # Faster compilation for iterative testing
strip = false  # Keep symbols for profiling

# Cargo configuration
[term]
# Use color in terminal output
color = "auto"

[net]
# Retry failed downloads
retry = 2

# Registries configuration
[registries.crates-io]
protocol = "sparse"  # Use sparse index for faster updates 